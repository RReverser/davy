!function(e){"use strict";function t(e){this.value=e,this.deferreds=[]}function i(e,t,i){var n=e[t],r=e.promise;l(n)?u(function(){try{i=n(i),r.fulfill(i)}catch(e){r.reject(e)}}):r[t](i)}function n(e,t,i){return{promise:e,fulfill:t,reject:i}}function r(e){return e&&"object"==typeof e}function l(e){return e&&"function"==typeof e}var u;"function"==typeof define&&define.amd?define(["subsequent"],function(e){return u=e,t}):"object"==typeof module&&module.exports?(module.exports=t,u=require("subsequent")):(e.Davy=e.Promise=t,u=e.nextTick),t.prototype.isFulfilled=!1,t.prototype.isRejected=!1,t.prototype.then=function(e,r){var l=new t,u=n(l,e,r);return this.isFulfilled||this.isRejected?i(u,this.isFulfilled?t.SUCCESS:t.FAILURE,this.value):this.deferreds.push(u),l},t.prototype.fulfill=function(e){if(!this.isFulfilled&&!this.isRejected){var t=!1;try{if(e===this)throw new TypeError("Can't resolve a promise with itself.");if(r(e)||l(e)){var i=e.then,n=this;if(l(i))return i.call(e,function(e){t||(t=!0,n.fulfill(e))},function(e){t||(t=!0,n.reject(e))}),void 0}this.isFulfilled=!0,this.complete(e)}catch(u){t||this.reject(u)}}},t.prototype.reject=function(e){this.isFulfilled||this.isRejected||(this.isRejected=!0,this.complete(e))},t.prototype.complete=function(e){this.value=e;for(var n=this.isFulfilled?t.SUCCESS:t.FAILURE,r=0;r<this.deferreds.length;++r)i(this.deferreds[r],n,e);this.deferreds=void 0},t.SUCCESS="fulfill",t.FAILURE="reject",t.all=function(){function e(e){f.reject(e)}function i(e){n(s,e)}function n(t,n){return r(n)&&l(n.then)?(n.then(i,e),void 0):(u[t]=n,0===--o&&f.fulfill(u),void 0)}var u=[].slice.call(1===arguments.length&&Array.isArray(arguments[0])?arguments[0]:arguments),f=new t,o=u.length;0===o&&f.fulfill([]);for(var s=0;s<u.length;++s)n(s,u[s]);return f},t.wrap=function(e){return function(){var i=[].slice.call(arguments),n=new t;return i.push(function(e,t){e?n.reject(e):n.fulfill(t)}),e.apply(this,i),n}},t.prototype.back=function(e){return this.then(function(t){e(null,t)},function(t){e(t)})}}(this);
//# sourceMappingURL=davy.min.js.map
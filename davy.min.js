!function(e){"use strict";function t(e){this.value=e,this.deferreds=[]}function i(e,t,i){var r=e[t],n=e.promise;s(r)?l(function(){try{i=r(i),n.fulfill(i)}catch(e){n.reject(e)}}):n[t](i)}function r(e,t,i){return{promise:e,fulfill:t,reject:i}}function n(e){return e&&"object"==typeof e}function s(e){return e&&"function"==typeof e}var l;"function"==typeof define&&define.amd?define(["subsequent"],function(e){return l=e,t}):"object"==typeof module&&module.exports?(module.exports=t,l=require("subsequent")):(e.Davy=e.Promise=t,l=e.nextTick),t.prototype.isFulfilled=!1,t.prototype.isRejected=!1,t.prototype.then=function(e,n){var s=new t,l=r(s,e,n);return this.isFulfilled||this.isRejected?i(l,this.isFulfilled?t.SUCCESS:t.FAILURE,this.value):this.deferreds.push(l),s},t.prototype.fulfill=function(e){if(!this.isFulfilled&&!this.isRejected){var t=!1;try{if(e===this)throw new TypeError("Can't resolve a promise with itself.");if(n(e)||s(e)){var i=e.then,r=this;if(s(i))return i.call(e,function(e){t||(t=!0,r.fulfill(e))},function(e){t||(t=!0,r.reject(e))}),void 0}this.isFulfilled=!0,this.complete(e)}catch(l){t||this.reject(l)}}},t.prototype.reject=function(e){this.isFulfilled||this.isRejected||(this.isRejected=!0,this.complete(e))},t.prototype.complete=function(e){this.value=e;for(var r=this.isFulfilled?t.SUCCESS:t.FAILURE,n=0;n<this.deferreds.length;++n)i(this.deferreds[n],r,e);this.deferreds=void 0},t.SUCCESS="fulfill",t.FAILURE="reject",t.all=function(){function e(e){o.reject(e)}function i(e){r(u,e)}function r(t,r){return n(r)&&s(r.then)?(r.then(i,e),void 0):(l[t]=r,0===--f&&o.fulfill(l),void 0)}for(var l=[].slice.call(1===arguments.length&&Array.isArray(arguments[0])?arguments[0]:arguments),o=new t,f=l.length,u=0;u<l.length;++u)r(u,l[u]);return o}}(this);
//# sourceMappingURL=davy.min.js.map